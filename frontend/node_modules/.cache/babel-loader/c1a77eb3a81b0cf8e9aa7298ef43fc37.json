{"ast":null,"code":"import { call, put, takeEvery } from \"redux-saga/effects\";\nimport { push } from \"connected-react-router\";\nimport * as actionCreators from \"../actions\";\nimport * as modalActionCreators from \"../../common/ModalDialog/actions\";\nimport * as notificationActionCreators from \"../../common/Notifications/actions\";\nimport { USER, SIGN_IN_MODAL } from \"../constants\";\n\nconst request = ({\n  login,\n  password\n}) => {\n  return new Promise((resolve, reject) => {\n    return login === \"bob\" && password === \"123\" ? setTimeout(() => resolve(USER), 1000) : reject(new Error(\"Неверные данные\"));\n  });\n};\n\nfunction* signIn(action) {\n  try {\n    const user = yield call(request, action.payload);\n    yield signInSuccess(user);\n  } catch (error) {\n    yield put(actionCreators.signInFail());\n    yield put(notificationActionCreators.errorNotification(error.message));\n  }\n}\n\nfunction* signInSuccess(user) {\n  yield put(actionCreators.signInSuccess(user));\n  yield put(notificationActionCreators.removeAllNotifications());\n  yield put(notificationActionCreators.successNotification(\"Вход успешно выполнен!\"));\n  yield put(modalActionCreators.toggleModal(SIGN_IN_MODAL.modalName));\n  yield put(push(\"/account\"));\n}\n\nfunction* sendRequest() {\n  yield takeEvery(actionCreators.signInRequest, signIn);\n}\n\nexport default sendRequest;","map":{"version":3,"sources":["D:\\projects\\mern-kinopoisk\\frontend\\src\\modules\\auth\\sagas\\index.js"],"names":["call","put","takeEvery","push","actionCreators","modalActionCreators","notificationActionCreators","USER","SIGN_IN_MODAL","request","login","password","Promise","resolve","reject","setTimeout","Error","signIn","action","user","payload","signInSuccess","error","signInFail","errorNotification","message","removeAllNotifications","successNotification","toggleModal","modalName","sendRequest","signInRequest"],"mappings":"AAAA,SAASA,IAAT,EAAeC,GAAf,EAAoBC,SAApB,QAAqC,oBAArC;AACA,SAASC,IAAT,QAAqB,wBAArB;AAEA,OAAO,KAAKC,cAAZ,MAAgC,YAAhC;AACA,OAAO,KAAKC,mBAAZ,MAAqC,kCAArC;AACA,OAAO,KAAKC,0BAAZ,MAA4C,oCAA5C;AACA,SAASC,IAAT,EAAeC,aAAf,QAAoC,cAApC;;AAEA,MAAMC,OAAO,GAAG,CAAC;AAAEC,EAAAA,KAAF;AAASC,EAAAA;AAAT,CAAD,KAAyB;AACvC,SAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACtC,WAAOJ,KAAK,KAAK,KAAV,IAAmBC,QAAQ,KAAK,KAAhC,GACHI,UAAU,CAAC,MAAMF,OAAO,CAACN,IAAD,CAAd,EAAsB,IAAtB,CADP,GAEHO,MAAM,CAAC,IAAIE,KAAJ,CAAU,iBAAV,CAAD,CAFV;AAGD,GAJM,CAAP;AAKD,CAND;;AAQA,UAAUC,MAAV,CAAiBC,MAAjB,EAAyB;AACvB,MAAI;AACF,UAAMC,IAAI,GAAG,MAAMnB,IAAI,CAACS,OAAD,EAAUS,MAAM,CAACE,OAAjB,CAAvB;AACA,UAAMC,aAAa,CAACF,IAAD,CAAnB;AACD,GAHD,CAGE,OAAOG,KAAP,EAAc;AACd,UAAMrB,GAAG,CAACG,cAAc,CAACmB,UAAf,EAAD,CAAT;AACA,UAAMtB,GAAG,CAACK,0BAA0B,CAACkB,iBAA3B,CAA6CF,KAAK,CAACG,OAAnD,CAAD,CAAT;AACD;AACF;;AAED,UAAUJ,aAAV,CAAwBF,IAAxB,EAA8B;AAC5B,QAAMlB,GAAG,CAACG,cAAc,CAACiB,aAAf,CAA6BF,IAA7B,CAAD,CAAT;AACA,QAAMlB,GAAG,CAACK,0BAA0B,CAACoB,sBAA3B,EAAD,CAAT;AACA,QAAMzB,GAAG,CAACK,0BAA0B,CAACqB,mBAA3B,CAA+C,wBAA/C,CAAD,CAAT;AACA,QAAM1B,GAAG,CAACI,mBAAmB,CAACuB,WAApB,CAAgCpB,aAAa,CAACqB,SAA9C,CAAD,CAAT;AACA,QAAM5B,GAAG,CAACE,IAAI,CAAC,UAAD,CAAL,CAAT;AACD;;AAED,UAAU2B,WAAV,GAAwB;AACtB,QAAM5B,SAAS,CAACE,cAAc,CAAC2B,aAAhB,EAA+Bd,MAA/B,CAAf;AACD;;AAED,eAAea,WAAf","sourcesContent":["import { call, put, takeEvery } from \"redux-saga/effects\";\r\nimport { push } from \"connected-react-router\";\r\n\r\nimport * as actionCreators from \"../actions\";\r\nimport * as modalActionCreators from \"../../common/ModalDialog/actions\";\r\nimport * as notificationActionCreators from \"../../common/Notifications/actions\";\r\nimport { USER, SIGN_IN_MODAL } from \"../constants\";\r\n\r\nconst request = ({ login, password }) => {\r\n  return new Promise((resolve, reject) => {\r\n    return login === \"bob\" && password === \"123\"\r\n      ? setTimeout(() => resolve(USER), 1000)\r\n      : reject(new Error(\"Неверные данные\"));\r\n  });\r\n};\r\n\r\nfunction* signIn(action) {\r\n  try {\r\n    const user = yield call(request, action.payload);\r\n    yield signInSuccess(user);\r\n  } catch (error) {\r\n    yield put(actionCreators.signInFail());\r\n    yield put(notificationActionCreators.errorNotification(error.message));\r\n  }\r\n}\r\n\r\nfunction* signInSuccess(user) {\r\n  yield put(actionCreators.signInSuccess(user));\r\n  yield put(notificationActionCreators.removeAllNotifications());\r\n  yield put(notificationActionCreators.successNotification(\"Вход успешно выполнен!\"));\r\n  yield put(modalActionCreators.toggleModal(SIGN_IN_MODAL.modalName));\r\n  yield put(push(\"/account\"));\r\n}\r\n\r\nfunction* sendRequest() {\r\n  yield takeEvery(actionCreators.signInRequest, signIn);\r\n}\r\n\r\nexport default sendRequest;\r\n"]},"metadata":{},"sourceType":"module"}