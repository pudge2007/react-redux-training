{"ast":null,"code":"import { call, put, takeEvery } from 'redux-saga/effects';\nimport * as actionCreators from '../actions';\nimport * as modalActionCreators from '../../common/ModalDialog/actions';\nimport { USER, SIGN_IN_MODAL } from '../constants';\n\nconst request = ({\n  login,\n  password\n}) => {\n  console.log(login, password);\n  return new Promise((resolve, reject) => {\n    return (login === 'bob', password === '123') ? setTimeout(() => resolve(USER), 10000) : reject(new Error('Неверные данные'));\n  });\n};\n\nfunction* signIn(action) {\n  console.log(action);\n\n  try {\n    const user = yield call(request, action.payload);\n    yield signInSuccess(user);\n  } catch (error) {\n    yield put(actionCreators.signInFail, error);\n    yield put(modalActionCreators.toggleModal(SIGN_IN_MODAL.modalName));\n  }\n}\n\nfunction* signInSuccess(user) {\n  yield put(actionCreators.signInSuccess, user);\n  yield put(modalActionCreators.toggleModal(SIGN_IN_MODAL.modalName)); // TODO редирект\n}\n\nfunction* sendRequest() {\n  yield takeEvery(actionCreators.signInRequest, signIn);\n}\n\nexport default sendRequest;","map":{"version":3,"sources":["D:\\projects\\mern-kinopoisk\\frontend\\src\\modules\\auth\\sagas\\index.js"],"names":["call","put","takeEvery","actionCreators","modalActionCreators","USER","SIGN_IN_MODAL","request","login","password","console","log","Promise","resolve","reject","setTimeout","Error","signIn","action","user","payload","signInSuccess","error","signInFail","toggleModal","modalName","sendRequest","signInRequest"],"mappings":"AAAA,SAASA,IAAT,EAAeC,GAAf,EAAoBC,SAApB,QAAoC,oBAApC;AAEA,OAAO,KAAKC,cAAZ,MAAgC,YAAhC;AACA,OAAO,KAAKC,mBAAZ,MAAqC,kCAArC;AACA,SAASC,IAAT,EAAeC,aAAf,QAAoC,cAApC;;AAEA,MAAMC,OAAO,GAAG,CAAC;AAACC,EAAAA,KAAD;AAAQC,EAAAA;AAAR,CAAD,KAAuB;AACnCC,EAAAA,OAAO,CAACC,GAAR,CAAYH,KAAZ,EAAmBC,QAAnB;AACA,SAAO,IAAIG,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACpC,WAAO,CAACN,KAAK,KAAK,KAAV,EAAiBC,QAAQ,KAAK,KAA/B,IAAwCM,UAAU,CAAC,MAAMF,OAAO,CAACR,IAAD,CAAd,EAAsB,KAAtB,CAAlD,GAAiFS,MAAM,CAAC,IAAIE,KAAJ,CAAU,iBAAV,CAAD,CAA9F;AACH,GAFM,CAAP;AAGH,CALD;;AAOA,UAAWC,MAAX,CAAmBC,MAAnB,EAA2B;AACvBR,EAAAA,OAAO,CAACC,GAAR,CAAYO,MAAZ;;AACA,MAAI;AACA,UAAMC,IAAI,GAAG,MAAMnB,IAAI,CAACO,OAAD,EAAUW,MAAM,CAACE,OAAjB,CAAvB;AACA,UAAMC,aAAa,CAACF,IAAD,CAAnB;AACH,GAHD,CAGE,OAAOG,KAAP,EAAc;AACZ,UAAMrB,GAAG,CAACE,cAAc,CAACoB,UAAhB,EAA4BD,KAA5B,CAAT;AACA,UAAMrB,GAAG,CAACG,mBAAmB,CAACoB,WAApB,CAAgClB,aAAa,CAACmB,SAA9C,CAAD,CAAT;AACH;AACJ;;AAED,UAAWJ,aAAX,CAA0BF,IAA1B,EAAgC;AAC5B,QAAMlB,GAAG,CAACE,cAAc,CAACkB,aAAhB,EAA+BF,IAA/B,CAAT;AACA,QAAMlB,GAAG,CAACG,mBAAmB,CAACoB,WAApB,CAAgClB,aAAa,CAACmB,SAA9C,CAAD,CAAT,CAF4B,CAG5B;AACH;;AAED,UAAWC,WAAX,GAA0B;AACtB,QAAMxB,SAAS,CAACC,cAAc,CAACwB,aAAhB,EAA+BV,MAA/B,CAAf;AACH;;AAED,eAAeS,WAAf","sourcesContent":["import { call, put, takeEvery} from 'redux-saga/effects';\r\n\r\nimport * as actionCreators from '../actions';\r\nimport * as modalActionCreators from '../../common/ModalDialog/actions';\r\nimport { USER, SIGN_IN_MODAL } from '../constants';\r\n\r\nconst request = ({login, password}) => {\r\n    console.log(login, password)\r\n    return new Promise((resolve, reject) => {\r\n        return (login === 'bob', password === '123') ? setTimeout(() => resolve(USER), 10000) : reject(new Error('Неверные данные'))\r\n    });\r\n}\r\n\r\nfunction * signIn (action) {\r\n    console.log(action);\r\n    try {\r\n        const user = yield call(request, action.payload);\r\n        yield signInSuccess(user);\r\n    } catch (error) {\r\n        yield put(actionCreators.signInFail, error);\r\n        yield put(modalActionCreators.toggleModal(SIGN_IN_MODAL.modalName));\r\n    }\r\n}\r\n\r\nfunction * signInSuccess (user) {\r\n    yield put(actionCreators.signInSuccess, user);\r\n    yield put(modalActionCreators.toggleModal(SIGN_IN_MODAL.modalName));\r\n    // TODO редирект\r\n}\r\n\r\nfunction * sendRequest () {\r\n    yield takeEvery(actionCreators.signInRequest, signIn)\r\n}\r\n\r\nexport default sendRequest;"]},"metadata":{},"sourceType":"module"}